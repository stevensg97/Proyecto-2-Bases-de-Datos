<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>BancaTec</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet"  href="estilos.css">
    <link rel="shortcut icon" type="image/x-icon" href="Recursos/icon_bancatec.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	<header>
		<div class="contenedor">
			<div class="logo">
				<img src="Recursos/logo_bancatec.png" >
			</div>
			<nav class="" style="display: none;" id="menunav"><!-- Menu de navegación de la página -->
				<ul>
					<li><a href="javascript:mostrar('inicio')"">Inicio</a></li>
					<li><a>Cuentas</a>
                        <ul>
                            <li><a href="javascript:mostrar('movimientosCue')">Movimientos</a>
                            <li><a href="javascript:mostrar('tarjetasCue')">Tarjetas</a>
                            <li><a href="javascript:mostrar('transferenciasCue')">Transferencias</a>
                            <li><a href="javascript:mostrar('tablaCuentas')">Ver</a>
                        </ul>    
                    </li>
					<li><a>Tarjetas</a>
                        <ul>
                            <li><a href="javascript:mostrar('pagoTar')">Pago</a>
                            <li><a href="javascript:mostrar('comprasTar')">Compras</a>
                        </ul>
                    </li>
					<li><a>Préstamos</a>
                        <ul>
                            <li><a href="javascript:mostrar('pagosPre')">Pagos</a>
                            <li><a href="javascript:mostrar('normal')">Normal</a>
                            <li><a href="javascript:mostrar('extra')">Extra</a>
                        </ul>
                    </li>
					<li><a href="index.html">Salir</a></li>
				</ul>
			</nav>

            <nav class="" style="display: none;" id="menunemp">
                <ul>
                    
                    <li><a href="index.html">Salir</a></li>
                </ul>
            </nav>
		</div>

        <!-- Login -->
        <form action= "" id="login" method="post" style="margin-left: 500px">
            <h2>Login BancaTec</h2>
            <input type="text" placeholder="&#128272; Usuario" name="Usuario">
            <input type="password" placeholder="&#128272; Contraseña" name="Contraseña">
            <input type="button" value="Ingresar" onclick="javascript:mostrar('login');">
        </form>
        <!-- Login -->

        <!-- Cuentas -->
        <div class="contenedor" style="display: none" id="cuentas">
            <form action="" name="movimientosCue" method="post" id="movimientosCue" style="float: left;">
                <h2>Cuenta a Consultar</h2>
                <input type="number" placeholder="Cuenta" name="Cuenta" required>
                <input type="button" value="Mostrar" onclick="consultaCue();">
            </form>

            <form action="" name="tableMovimientos" method="post" id="tableMovimientos" style="display: none;float: left;">
                <table width="700px" border="1px" title="Calendario" style="" id="tablaMovimientos">
                    <caption align="top">Movimientos</caption>
                    <tr>
                        <td width="140px">
                            <b>Tipo</b>
                        </td>
                        <td width="140px">
                            <b>Fecha</b>
                        </td>
                        <td width="140px">
                            <b>Monto</b> 
                        </td>
                        <td width="140px">
                            <b>Moneda</b> 
                        </td>
                        <td width="140px">
                            <b>ID</b>
                        </td>
                    </tr>
                </table>
            </form>


            <form action="" name="tarjetasCue" method="post" id="tarjetasCue" style="float: left;">
                <h2>Cuenta a Consultar</h2>
                <input type="number" placeholder="Cuenta" name="Cuenta" required>
                <input type="button" value="Mostrar" onclick="consultaTarCue();">
            </form>

            <form action="" name="tableTarjetasCue" method="post" id="tableTarjetasCue" style="display: none;float: left;">
                <table width="600px" border="1px" title="Tarjetas" style="" id="tablaTarjetasCue">
                    <caption align="top">Tarjetas Asociadas</caption>
                    <tr>
                        <td width="150px">
                            <b>Número</b>
                        </td>
                        <td width="150px">
                            <b>Fecha</b>
                        </td>
                        <td width="150px">
                            <b>Saldo</b>
                        </td>
                        <td width="150px">
                            <b>Tipo</b>
                        </td>
                    </tr>
                </table>
            </form>

            <form action="" name="transferenciasCue" method="post" id="transferenciasCue">
                <h2>Transferencia</h2>
                Tipo de moneda:<br>
                <input type="radio" name="moneda_transferencia"  id="ColonesTra" value="Colones" onclick="moneda('Colones');" checked>
                <label for="ColonesTra"> Colones<br></label>
                <input type="radio" name="moneda_transferencia"  id="DolaresTra" value="Dólares" onclick="moneda('Dolares');">
                <label for="DolaresTra"> Dólares<br></label>
                <input type="number" placeholder="Monto" name="Monto" required>
                <input type="number" placeholder="Cuenta Emisora" name="CuentaEmi" required>
                <input type="number" placeholder="Cuenta Receptora" name="CuentaRec" required>
                <input type="button" value="Transferir" onclick="postTra();">
            </form>

            <form action="" name="verCue" method="post" id="verCue" style="float: left;">
                <h2>Cuentas</h2>
                <input type="button" value="Limpiar" onclick="limpiar('tablaCuentas');">
                <input type="button" value="Mostrar" onclick="verCuentas();">
            </form>

            <form action="" name="tableCuentas" method="post" id="tableCuentas" style="display: none;float: left;">
                <table width="700px" border="1px" title="Calendario" style="" id="tablaCuentas">
                    <caption align="top">Cuentas Asociadas</caption>
                    <tr>
                        <td width="140px">
                            <b>Tipo</b>
                        </td>
                        <td width="140px">
                            <b>Moneda</b>
                        </td>
                        <td width="140px">
                            <b>Descripción</b> 
                        </td>
                        <td width="140px">
                            <b>Número</b> 
                        </td>
                        <td width="140px">
                            <b>Saldo</b>
                        </td>
                    </tr>
                </table>
            </form>

        </div>

        <!-- Cuentas -->

        <!-- Tarjetas -->
        <div class="contenedor" style="display: none" id="tarjetas">
            <form action="" name="pagoTar" method="post" id="pagoTar">
                <h2>Pago de Tarjeta</h2>
                <input type="number" placeholder="Número de Tarjeta" name="Numero" required>
                <input type="number" placeholder="Monto a Cancelar" name="Monto" required>
                <input type="button" value="Pagar" onclick="pagoTarjeta();">
            </form>

            <form action="" name="listadoTar" method="post" id="listadoTar" style="float: left;">
                <h2>Tarjeta a Consultar</h2>
                <input type="number" placeholder="Número de Tarjeta" name="Numero" required>Fecha Inicial<br>
                <input type="text" placeholder="aaaa-mm-dd" name="fechaInicio" required>Fecha Final<br>
                <input type="text" placeholder="aaaa-mm-dd" name="fechaFinal" required>
                <input type="button" value="Consultar" onclick="listadoTarjetas();">
            </form>

            <form action="" name="tableListado" method="post" id="tableListado" style="display: none;float: left;">
                <table width="700px" border="1px" title="Tarjetas" style="" id="tablaListado">
                    <caption align="top">Listado de Compras</caption>
                    <tr>
                        <td width="140px">
                            <b>Comercio</b>
                        </td>
                        <td width="140px">
                            <b>Fecha</b>
                        </td>
                        <td width="140px">
                            <b>Monto</b>
                        </td>
                        <td width="140px">
                            <b>Moneda</b>
                        </td>
                        <td width="140px">
                            <b>ID</b>
                        </td>
                    </tr>
                </table>
            </form>
        </div>
        <!-- Tarjetas -->

        <!-- Préstamos -->
        <div class="contenedor" style="display: none" id="prestamos">
            <form action="" name="pagosPre" method="post" id="pagosPre" style="float: left;">
                <h2>Cálculo de Pagos</h2>
                <input type="button" value="Limpiar" onclick="limpiar('tablaCalendario');">
                <input type="button" value="Mostrar" onclick="pagoPre();">
            </form>

            <form action="" name="tableCalendario" method="post" id="tableCalendario" style="display: none;float: left;">
                <table width="700px" border="1px" title="Calendario" style="" id="tablaCalendario">
                    <caption align="top">Calendario de Pagos</caption>
                    <tr>
                        <td width="140px">
                            <b># de Préstamo</b>
                        </td>
                        <td width="140px">
                            <b>Fecha</b>
                        </td>
                        <td width="140px">
                            <b>Amortización</b>
                        </td>
                        <td width="140px">
                            <b>Intereses</b>
                        </td>
                        <td width="140px">
                            <b>Estado</b>
                        </td>
                    </tr>
                </table>
            </form>

            <form action="" name="pagoOrd" method="post" id="pagoOrd" style="float: left;">
                <h2>Pago Normal</h2>
                <input type="number" placeholder="Número de Cuenta" name="Cuenta" required>
                <input type="number" placeholder="Número de Préstamo" name="Numero" required>
                <input type="button" value="Pagar" onclick="pagosOrd();">
            </form>

            <form action="" name="pagoExt" method="post" id="pagoExt" style="float: left;">
                <h2>Pago Extraordinario</h2>
                <input type="number" placeholder="Número de Cuenta" name="Cuenta" required>
                <input type="number" placeholder="Número de Préstamo" name="Numero" required>
                <input type="number" placeholder="Monto" name="Monto" required>
                
                <input type="button" value="Pagar" onclick="pagosExt();">
            </form>
        </div>
        <!-- Préstamos -->

	</header>
	<div class="contenedor">
		<p>
			
		</p>
	</div>



	<script>
        var IP = 'http://40.71.191.83/BancaTec/';
        var accounts = [];
        /*
        Función para mostrar los elementos de cada pestaña
        Parámetro: nombre de la pestaña a mostrar  
        */
		function mostrar(p1){
			/*Se hacen invisibles todos los divs */
            /*document.getElementById('login');
            roles.style.display='none';*/
            document.getElementById('login');
            document.getElementById('cuentas');
            cuentas.style.display='none';
            document.getElementById('tarjetas');
            tarjetas.style.display='none';
            document.getElementById('prestamos');
            prestamos.style.display='none';
			/*document.getElementById('sucursales');
			sucursales.style.display='none';
			document.getElementById('empleados');
			empleados.style.display='none';
			document.getElementById('proveedores');
			proveedores.style.display='none';
			document.getElementById('productos');
			productos.style.display='none';
			document.getElementById('compras');
			compras.style.display='none';
			document.getElementById('horas');
			horas.style.display='none';
            document.getElementById('planilla');
            planilla.style.display='none';
            document.getElementById('reportes');
            reportes.style.display='none';
            document.getElementById('facturacion');
            facturacion.style.display='none';

			/*Se muestra solo el div que se necesita*/

			switch(p1){
                case 'login':
                    var xhr = new XMLHttpRequest();
                    var user='';
                    var pass='';
                    xhr.onreadystatechange = function() {
                        if (xhr.readyState == XMLHttpRequest.DONE) {
                            var parser, xmlDoc;
                            var text = xhr.responseText;
                            parser = new DOMParser();
                            xmlDoc = parser.parseFromString(text,"text/xml");
                            user=xmlDoc.getElementsByTagName("Cedula")[0].childNodes[0].nodeValue;
                            pass=xmlDoc.getElementsByTagName("Contrasena")[0].childNodes[0].nodeValue;
                            if (user==login.Usuario.value && pass==login.Contraseña.value) {
                                login.style.display='none';
                                document.getElementById('menunav').style.display='block';
                                agregarCuentas();
                            }
                            else{
                                alert("Usuario y/o Contraseña Incorrectos");
                            }
                        }
                    }
                    xhr.open('GET', IP+'cliente?cedula='+login.Usuario.value, true);
                    xhr.send(null);
                    /*login.style.display='none';
                    document.getElementById('menunav').style.display='block';*/
                    break;

                case 'movimientosCue':
                    cuentas.style.display="block";
                    document.getElementById('movimientosCue');
                    movimientosCue.style.display='inline-table';
                    document.getElementById('tableMovimientos');
                    tableMovimientos.style.display='inline-table';
                    document.getElementById('tarjetasCue');
                    tarjetasCue.style.display='none';
                    document.getElementById('tableTarjetasCue');
                    tableTarjetasCue.style.display='none';
                    document.getElementById('transferenciasCue');
                    transferenciasCue.style.display='none';
                    document.getElementById('verCue');
                    verCue.style.display='none';
                    document.getElementById('tableCuentas');
                    tableCuentas.style.display='none';
                    break;
                case 'tarjetasCue':
                    cuentas.style.display="block";
                    document.getElementById('movimientosCue');
                    movimientosCue.style.display='none';
                    document.getElementById('tableMovimientos');
                    tableMovimientos.style.display='none';
                    document.getElementById('tarjetasCue');
                    tarjetasCue.style.display='inline-table';
                    document.getElementById('tableTarjetasCue');
                    tableTarjetasCue.style.display='inline-table';
                    document.getElementById('transferenciasCue');
                    transferenciasCue.style.display='none';
                    document.getElementById('verCue');
                    verCue.style.display='none';
                    document.getElementById('tableCuentas');
                    tableCuentas.style.display='none';
                    break;
                case 'transferenciasCue':
                    cuentas.style.display="block";
                    document.getElementById('movimientosCue');
                    movimientosCue.style.display='none';
                    document.getElementById('tableMovimientos');
                    tableMovimientos.style.display='none';
                    document.getElementById('tarjetasCue');
                    tarjetasCue.style.display='none';
                    document.getElementById('tableTarjetasCue');
                    tableTarjetasCue.style.display='none';
                    document.getElementById('transferenciasCue');
                    transferenciasCue.style.display='block';
                    document.getElementById('verCue');
                    verCue.style.display='none';
                    document.getElementById('tableCuentas');
                    tableCuentas.style.display='none';
                    break;
                case 'tablaCuentas':
                    cuentas.style.display="block";
                    document.getElementById('movimientosCue');
                    movimientosCue.style.display='none';
                    document.getElementById('tableMovimientos');
                    tableMovimientos.style.display='none';
                    document.getElementById('tarjetasCue');
                    tarjetasCue.style.display='none';
                    document.getElementById('tableTarjetasCue');
                    tableTarjetasCue.style.display='none';
                    document.getElementById('transferenciasCue');
                    transferenciasCue.style.display='none';
                    document.getElementById('verCue');
                    verCue.style.display='inline-table';
                    document.getElementById('tableCuentas');
                    tableCuentas.style.display='inline-table';
                    break;

                 case 'pagoTar':
                    tarjetas.style.display="block";
                    document.getElementById('pagoTar');
                    pagoTar.style.display='block';
                    document.getElementById('listadoTar');
                    listadoTar.style.display='none';
                    document.getElementById('tableListado');
                    tableListado.style.display='none';
                    break;
                case 'comprasTar':
                    tarjetas.style.display="block";
                    document.getElementById('pagoTar');
                    pagoTar.style.display='none';
                    document.getElementById('listadoTar');
                    listadoTar.style.display='inline-table';
                    document.getElementById('tableListado');
                    tableListado.style.display='inline-table';
                    break;

                case 'pagosPre':
                    prestamos.style.display="block";
                    document.getElementById('pagosPre');
                    pagosPre.style.display='block';
                    document.getElementById('tableCalendario');
                    tableCalendario.style.display='inline-table';
                    document.getElementById('pagoExt');
                    pagoExt.style.display='none';
                    document.getElementById('pagoOrd');
                    pagoOrd.style.display='none';
                    break;
                case 'normal':
                    prestamos.style.display="block";
                    document.getElementById('pagosPre');
                    pagosPre.style.display='none';
                    document.getElementById('tableCalendario');
                    tableCalendario.style.display='none';
                    document.getElementById('pagoExt');
                    pagoExt.style.display='none';
                    document.getElementById('pagoOrd');
                    pagoOrd.style.display='block';
                    break;
                 case 'extra':
                    prestamos.style.display="block";
                    document.getElementById('pagosPre');
                    pagosPre.style.display='none';
                    document.getElementById('tableCalendario');
                    tableCalendario.style.display='none';
                    document.getElementById('pagoExt');
                    pagoExt.style.display='block';
                    document.getElementById('pagoOrd');
                    pagoOrd.style.display='none';
                    break;
				
				default:
					
			}
        }

        /*Métodos de Cuentas*/
        function consultaCue() {
            if (verificar(document.getElementById('movimientosCue').Cuenta.value)) {
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (xhr.readyState == XMLHttpRequest.DONE) {
                        var parser, xmlDoc;
                        var text = xhr.responseText;
                        parser = new DOMParser();
                        xmlDoc = parser.parseFromString(text,"text/xml");
                        var numeroFila=0
                        var tabla = document.getElementById("tablaMovimientos");
                        limpiar("tablaMovimientos");
                        if (xmlDoc.getElementsByTagName("Tipo")[numeroFila].childNodes[0].nodeValue != null) {
                            while (xmlDoc.getElementsByTagName("Tipo")[numeroFila].childNodes[0].nodeValue != null){   
                                var fila = tabla.insertRow(numeroFila+1);
                                var cell1 = fila.insertCell(0);
                                var cell2 = fila.insertCell(1);
                                var cell3 = fila.insertCell(2);
                                var cell4 = fila.insertCell(3);
                                var cell5 = fila.insertCell(4);
                                cell1.innerHTML = xmlDoc.getElementsByTagName("Tipo")[numeroFila].childNodes[0].nodeValue;
                                var str = xmlDoc.getElementsByTagName("Fecha")[numeroFila].childNodes[0].nodeValue;
                                cell2.innerHTML =  str.substring(0,10);
                                cell3.innerHTML = xmlDoc.getElementsByTagName("Monto")[numeroFila].childNodes[0].nodeValue;
                                cell4.innerHTML = xmlDoc.getElementsByTagName("Moneda")[numeroFila].childNodes[0].nodeValue;
                                cell5.innerHTML = xmlDoc.getElementsByTagName("Id")[numeroFila].childNodes[0].nodeValue;
                                numeroFila = numeroFila+1;
                            }
                        }
                        
                    }
                }
                xhr.open('GET', IP+'movimiento?numcuenta='+document.movimientosCue.Cuenta.value, true);
                xhr.send(null);

                var xhr2 = new XMLHttpRequest();
                xhr2.onreadystatechange = function() {
                    if (xhr2.readyState == XMLHttpRequest.DONE) {
                        var parser, xmlDoc;
                        var text = xhr2.responseText;
                        parser = new DOMParser();
                        xmlDoc = parser.parseFromString(text,"text/xml");
                        numeroFila=0;
                        var tabla = document.getElementById("tablaMovimientos");
                        if (xmlDoc.getElementsByTagName("Id")[numeroFila].childNodes[0].nodeValue != null) {
                            while (xmlDoc.getElementsByTagName("Id")[numeroFila].childNodes[0].nodeValue != null){   
                                var fila = tabla.insertRow(numeroFila+1);
                                var cell1 = fila.insertCell(0);
                                var cell2 = fila.insertCell(1);
                                var cell3 = fila.insertCell(2);
                                var cell4 = fila.insertCell(3);
                                var cell5 = fila.insertCell(4);
                                if (xmlDoc.getElementsByTagName("CuentaEmisora")[numeroFila].childNodes[0].nodeValue==document.movimientosCue.Cuenta.value) {
                                    cell1.innerHTML = 'Débito';
                                }
                                else{
                                    cell1.innerHTML = 'Crédito';
                                }
                                var str = xmlDoc.getElementsByTagName("Fecha")[numeroFila].childNodes[0].nodeValue;
                                cell2.innerHTML =  str.substring(0,10);
                                cell3.innerHTML = xmlDoc.getElementsByTagName("Monto")[numeroFila].childNodes[0].nodeValue;
                                cell4.innerHTML = xmlDoc.getElementsByTagName("Moneda")[numeroFila].childNodes[0].nodeValue;
                                cell5.innerHTML = xmlDoc.getElementsByTagName("Id")[numeroFila].childNodes[0].nodeValue;
                                numeroFila = numeroFila+1;
                            }
                        }
                            
                    }
                }
                xhr2.open('GET', IP+'transferencia?cuenta='+document.movimientosCue.Cuenta.value, true);
                xhr2.send(null);
            }
            else{
                alert("Cuenta no válida");
            }
        }

        function consultaTarCue() {
            if (verificar(document.getElementById('tarjetasCue').Cuenta.value)) {
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (xhr.readyState == XMLHttpRequest.DONE) {
                        var parser, xmlDoc;
                        var text = xhr.responseText;
                        parser = new DOMParser();
                        xmlDoc = parser.parseFromString(text,"text/xml");
                        var numeroFila=0
                        var tabla = document.getElementById("tablaTarjetasCue");
                        limpiar("tablaTarjetasCue");
                        if (xmlDoc.getElementsByTagName("Tipo")[numeroFila].childNodes[0].nodeValue != null) {
                            while (xmlDoc.getElementsByTagName("Tipo")[numeroFila].childNodes[0].nodeValue != null){   
                                var fila = tabla.insertRow(numeroFila+1);
                                var cell1 = fila.insertCell(0);
                                var cell2 = fila.insertCell(1);
                                var cell3 = fila.insertCell(2);
                                var cell4 = fila.insertCell(3);
                                cell1.innerHTML = xmlDoc.getElementsByTagName("Numero")[numeroFila].childNodes[0].nodeValue;
                                var str = xmlDoc.getElementsByTagName("FechaExp")[numeroFila].childNodes[0].nodeValue;
                                cell2.innerHTML =  str.substring(0,10);
                                cell3.innerHTML = xmlDoc.getElementsByTagName("SaldoActual")[numeroFila].childNodes[0].nodeValue;
                                cell4.innerHTML = xmlDoc.getElementsByTagName("Tipo")[numeroFila].childNodes[0].nodeValue;
                                numeroFila = numeroFila+1;
                            }
                        }
                        
                    }
                }
                xhr.open('GET', IP+'tarjeta?numcuenta='+document.tarjetasCue.Cuenta.value, true);
                xhr.send(null);
            }
            else{
                alert("Cuenta no válida");
            }
        }

        function postTra() {
            if (verificar(document.transferenciasCue.CuentaEmi.value)) {
                var xhr = new XMLHttpRequest();
                
                var datos = 'monto='+document.transferenciasCue.Monto.value+'&fecha='+fecha()+'&cuentaemisora='+document.transferenciasCue.CuentaEmi.value+'&cuentareceptora='+document.transferenciasCue.CuentaRec.value+'&moneda='+document.transferenciasCue.moneda_transferencia.value;//Datos a enviar en el request.


                xhr.open('POST', IP+'transferencia', true); //Indica el tipo y la dirección del request.
                xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded'); // Indica el header del request
                xhr.setRequestHeader('Content-length', datos.length+''); //Indica el largo de los datos a enviar.

                xhr.onload = function () {
                    // do something to response
                    console.log(this.responseText);
                    alert(this.responseText);
                };
                xhr.send(datos); //Se hace el envío del request.
            }
            else{
                alert("Cuenta emisora no válida")
            }
        }

        function verCuentas() {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState == XMLHttpRequest.DONE) {
                    var parser, xmlDoc;
                    var text = xhr.responseText;
                    parser = new DOMParser();
                    xmlDoc = parser.parseFromString(text,"text/xml");
                    var numeroFila=0
                    var tabla = document.getElementById("tablaCuentas");
                    limpiar("tablaCuentas");
                    if (xmlDoc.getElementsByTagName("Tipo")[numeroFila].childNodes[0].nodeValue != null) {
                        while (xmlDoc.getElementsByTagName("Tipo")[numeroFila].childNodes[0].nodeValue != null){   
                            var fila = tabla.insertRow(numeroFila+1);
                            var cell1 = fila.insertCell(0);
                            var cell2 = fila.insertCell(1);
                            var cell3 = fila.insertCell(2);
                            var cell4 = fila.insertCell(3);
                            var cell5 = fila.insertCell(4);
                            cell1.innerHTML = xmlDoc.getElementsByTagName("Tipo")[numeroFila].childNodes[0].nodeValue;
                            cell2.innerHTML = xmlDoc.getElementsByTagName("Moneda")[numeroFila].childNodes[0].nodeValue;
                            cell3.innerHTML = xmlDoc.getElementsByTagName("Descripcion")[numeroFila].childNodes[0].nodeValue;
                            cell4.innerHTML = xmlDoc.getElementsByTagName("NumCuenta")[numeroFila].childNodes[0].nodeValue;
                            cell5.innerHTML = xmlDoc.getElementsByTagName("Saldo")[numeroFila].childNodes[0].nodeValue;
                            numeroFila = numeroFila+1;
                        }
                    }   
                }
            }
            xhr.open('GET', IP+'cuenta?cedcliente='+document.getElementById('login').Usuario.value, true);
            xhr.send(null);
        }
        /*Métodos de Cuentas*/

        /*Métodos de Tarjetas*/
        function pagoTarjeta() {
            var xhr = new XMLHttpRequest();
            
            var datos = 'monto='+document.pagoTar.Monto.value+/*'&fecha='+fecha()+*/'&numtarjeta='+document.pagoTar.Numero.value;//Datos a enviar en el request.


            xhr.open('POST', IP+'cancelartarjeta', true); //Indica el tipo y la dirección del request.
            xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded'); // Indica el header del request
            xhr.setRequestHeader('Content-length', datos.length+''); //Indica el largo de los datos a enviar.

            xhr.onload = function () {
                // do something to response
                console.log(this.responseText);
                alert(this.responseText);
                alert(datos);
            };
            xhr.send(datos); //Se hace el envío del request.
        }

        function listadoTarjetas() {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState == XMLHttpRequest.DONE) {
                    var parser, xmlDoc;
                    var text = xhr.responseText;
                    parser = new DOMParser();
                    xmlDoc = parser.parseFromString(text,"text/xml");
                    var numeroFila=0
                    var tabla = document.getElementById("tablaListado");
                    limpiar("tablaListado");
                    if (xmlDoc.getElementsByTagName("Comercio")[numeroFila].childNodes[0].nodeValue != null) {
                        while (xmlDoc.getElementsByTagName("Comercio")[numeroFila].childNodes[0].nodeValue != null){   
                            var fila = tabla.insertRow(numeroFila+1);
                            var cell1 = fila.insertCell(0);
                            var cell2 = fila.insertCell(1);
                            var cell3 = fila.insertCell(2);
                            var cell4 = fila.insertCell(3);
                            var cell5 = fila.insertCell(4);
                            cell1.innerHTML = xmlDoc.getElementsByTagName("Comercio")[numeroFila].childNodes[0].nodeValue;
                            var str = xmlDoc.getElementsByTagName("Fecha")[numeroFila].childNodes[0].nodeValue;
                            cell2.innerHTML =  str.substring(0,10);
                            cell3.innerHTML = xmlDoc.getElementsByTagName("Monto")[numeroFila].childNodes[0].nodeValue;
                            cell4.innerHTML = xmlDoc.getElementsByTagName("Moneda")[numeroFila].childNodes[0].nodeValue;
                            cell5.innerHTML = xmlDoc.getElementsByTagName("Id")[numeroFila].childNodes[0].nodeValue;
                            numeroFila = numeroFila+1;
                        }
                    }
                    
                }
            }
            xhr.open('GET', IP+'compra?numtarjeta='+document.listadoTar.Numero.value+'&fechainicial='+document.listadoTar.fechaInicio.value+'&fechafinal='+document.listadoTar.fechaFinal.value, true);
            alert(this.responseText);
            xhr.send(null);
        }
        /*Métodos de Tarjetas*/

        /*Métodos de Préstamos*/
        function pagoPre() {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState == XMLHttpRequest.DONE) {
                    var parser, xmlDoc;
                    var text = xhr.responseText;
                    parser = new DOMParser();
                    xmlDoc = parser.parseFromString(text,"text/xml");
                    var numeroFila=0
                    var tabla = document.getElementById("tablaCalendario");
                    limpiar("tablaCalendario");
                    if (xmlDoc.getElementsByTagName("Monto")[numeroFila].childNodes[0].nodeValue != null) {
                        while (xmlDoc.getElementsByTagName("Monto")[numeroFila].childNodes[0].nodeValue != null){  
                            var fila = tabla.insertRow(numeroFila+1);
                            var cell1 = fila.insertCell(0);
                            var cell2 = fila.insertCell(1);
                            var cell3 = fila.insertCell(2);
                            var cell4 = fila.insertCell(3);
                            var cell5 = fila.insertCell(4);
                            cell1.innerHTML = xmlDoc.getElementsByTagName("NumPrestamo")[numeroFila].childNodes[0].nodeValue;
                            var str = xmlDoc.getElementsByTagName("Fecha")[numeroFila].childNodes[0].nodeValue;
                            cell2.innerHTML = str.substring(0,10);
                            cell3.innerHTML = ''+parseFloat(xmlDoc.getElementsByTagName("Monto")[numeroFila].childNodes[0].nodeValue + xmlDoc.getElementsByTagName("MontoInteres")[numeroFila].childNodes[0].nodeValue)
                            cell4.innerHTML = xmlDoc.getElementsByTagName("MontoInteres")[numeroFila].childNodes[0].nodeValue;
                            cell5.innerHTML = xmlDoc.getElementsByTagName("Estado")[numeroFila].childNodes[0].nodeValue;
                            numeroFila = numeroFila+1;
                        }
                    }
                    
                }
            }
            xhr.open('GET', IP+'pago?cedcliente='+document.getElementById('login').Usuario.value, true);
            xhr.send(null);

        }

        function pagosOrd() {
            if (verificar(document.pagoOrd.Cuenta.value)) {
                var xhr = new XMLHttpRequest();

                var datos = 'cuenta='+document.pagoOrd.Cuenta.value+'&numprestamo='+document.pagoOrd.Numero.value;//Datos a enviar en el request.

                xhr.open('POST', IP+'pago', true); //Indica el tipo y la dirección del request.
                xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded'); // Indica el header del request
                xhr.setRequestHeader('Content-length', datos.length+''); //Indica el largo de los datos a enviar.

                xhr.onload = function () {
                    // do something to response
                    console.log(this.responseText);
                    alert(this.responseText);
                };
                xhr.send(datos); //Se hace el envío del request.
            }
            else{
                alert("Cuenta no válida");
            }
        }

        function pagosExt() {
            if (verificar(document.pagoExt.Cuenta.value)) {
                var xhr = new XMLHttpRequest();

                var datos = 'cuenta='+document.pagoExt.Cuenta.value+'&numprestamo='+document.pagoExt.Numero.value+'&extra='+document.pagoExt.Monto.value;//Datos a enviar en el request.

                xhr.open('POST', IP+'pago', true); //Indica el tipo y la dirección del request.
                xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded'); // Indica el header del request
                xhr.setRequestHeader('Content-length', datos.length+''); //Indica el largo de los datos a enviar.

                xhr.onload = function () {
                    // do something to response
                    console.log(this.responseText);
                    alert(this.responseText);
                };
                xhr.send(datos); //Se hace el envío del request.
            }
            else{
                alert("Cuenta no válida");
            }
        }
        /*Métodos de Préstamos*/

        function limpiar(p1){
            var tabla = document.getElementById(p1);
            while(tabla.rows.length!=1){
                tabla.deleteRow(1);
            }
        }

        function ocultar(p1){
            if(p1=='crear'){
                document.getElementById('crearCli');
                crearCli.PNombre.placeholder='Nombre';
                crearCli.SNombre.style.display='none';
                crearCli.PApellido.style.display='none';
                crearCli.SApellido.style.display='none';
            }
            else{
                document.getElementById('modificarCli');
                modificarCli.PNombre.placeholder='Nombre';
                modificarCli.SNombre.style.display='none';
                modificarCli.PApellido.style.display='none';
                modificarCli.SApellido.style.display='none';
            }
        }

        function desocultar(p1){
            if (p1=='crear') {
                document.getElementById('crearCli');
                crearCli.PNombre.placeholder='Primer Nombre';
                crearCli.SNombre.style.display='block';
                crearCli.PApellido.style.display='block';
                crearCli.SApellido.style.display='block';
            }
            else{
                document.getElementById('modificarCli');
                modificarCli.PNombre.placeholder='Primer Nombre';
                modificarCli.SNombre.style.display='block';
                modificarCli.PApellido.style.display='block';
                modificarCli.SApellido.style.display='block';
                
            }
        }

        function moneda(p1){
            switch(p1){
                case 'Dolares':
                    document.getElementById('crearCli');
                    crearCli.ingreso.placeholder='$ Ingreso Mensual';
                    break;
                case 'Euros':
                    document.getElementById('crearCli');
                    crearCli.ingreso.placeholder='€ Ingreso Mensual';
                    break;
                case 'Colones':
                    document.getElementById('crearCli');
                    crearCli.ingreso.placeholder='₡ Ingreso Mensual';
                    break;
                default:
            }
        }

        function monedamod(p1){
            switch(p1){
                case 'Dolares':
                    document.getElementById('modificarCli');
                    modificarCli.ingreso.placeholder='$ Ingreso Mensual';
                    break;
                case 'Euros':
                    document.getElementById('modificarCli');
                    modificarCli.ingreso.placeholder='€ Ingreso Mensual';
                    break;
                case 'Colones':
                    document.getElementById('modificarCli');
                    modificarCli.ingreso.placeholder='₡ Ingreso Mensual';
                    break;
                default:
            }
        }

        function contraseña(){
            var aleatorio = Math.round(Math.random()*9999);
            return ''+aleatorio;
        }

        function fecha(){
            var today = new Date();
            var dd = today.getDate();
            var mm = today.getMonth()+1; //January is 0!
            var yyyy = today.getFullYear();
            if(dd<10){
                dd='0'+dd;
            } 
            if(mm<10){
                mm='0'+mm;
            }
            var today = yyyy+'-'+mm+'-'+dd;
            return today+'';
        }
        
        function agregarCuentas(){
            var xhr = new XMLHttpRequest();

            xhr.onreadystatechange = function() {
                if (xhr.readyState == XMLHttpRequest.DONE) {
                    var parser, xmlDoc;
                    var text = xhr.responseText;
                    parser = new DOMParser();
                    numeroFila=0;
                    xmlDoc = parser.parseFromString(text,"text/xml");
                    if (xmlDoc.getElementsByTagName("Saldo")[numeroFila].childNodes[0].nodeValue != null) {
                        while (xmlDoc.getElementsByTagName("Saldo")[numeroFila].childNodes[0].nodeValue != null){  
                            accounts[numeroFila]=xmlDoc.getElementsByTagName("NumCuenta")[numeroFila].childNodes[0].nodeValue+'';
                            numeroFila=numeroFila+1;
                        }
                        
                    }
                }
            }
            xhr.open('GET', IP+'cuenta?cedcliente='+document.getElementById('login').Usuario.value, true);
            xhr.send(null);
        }


        function verificar(p1){
            for (var i = 0 ; i < accounts.length; i++) {
                if (p1==accounts[i]) {
                    return true;
                }
            }
            return false;
        }

    </script>
</body>
</html>