<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>BancaTec</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet"  href="estilos.css">
    <link rel="shortcut icon" type="image/x-icon" href="Recursos/icon_bancatec.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	<header>
		<div class="contenedor">
			<div class="logo">
				<img src="Recursos/logo_bancatec.png" >
			</div>
			<nav class="" style="display: none;" id="menunav"><!-- Menu de navegación de la página -->
				<ul>
					<li><a href="javascript:mostrar('inicio')"">Inicio</a></li>
					<li><a>Cuentas</a>
                        <ul>
                            <li><a href="javascript:mostrar('movimientosCue')">Movimientos</a>
                            <li><a href="javascript:mostrar('tarjetasCue')">Tarjetas</a>
                            <li><a href="javascript:mostrar('transferenciasCue')">Transferencias</a>
                        </ul>    
                    </li>
					<li><a>Tarjetas</a>
                        <ul>
                            <li><a href="javascript:mostrar('pagoTar')">Pago</a>
                            <li><a href="javascript:mostrar('comprasTar')">Compras</a>
                        </ul>
                    </li>
					<li><a>Préstamos</a>
                        <ul>
                            <li><a href="javascript:mostrar('pagosPre')">Pagos</a>
                        </ul>
                    </li>
					<li><a href="index.html">Salir</a></li>
				</ul>
			</nav>

            <nav class="" style="display: none;" id="menunemp">
                <ul>
                    
                    <li><a href="index.html">Salir</a></li>
                </ul>
            </nav>
		</div>

        <!-- Login -->
        <form action= "" id="login" method="post" style="margin-left: 500px">
            <h2>Login BancaTec</h2>
            <input type="text" placeholder="&#128272; Usuario" name="Usuario">
            <input type="password" placeholder="&#128272; Contraseña" name="Contraseña">
            <input type="button" value="Ingresar" onclick="javascript:mostrar('login');">
        </form>
        <!-- Login -->

        <!-- Cuentas -->
        <div class="contenedor" style="display: none" id="cuentas">
            <form action="" name="movimientosCue" method="post" id="movimientosCue" style="float: left;">
                <h2>Cuenta a Consultar</h2>
                <input type="number" placeholder="Cuenta" name="Cuenta" required>
                <input type="button" value="Mostrar" onclick="consultaCue();">
            </form>

            <form action="" name="tableMovimientos" method="post" id="tableMovimientos" style="display: none;float: left;">
                <table width="600px" border="1px" title="Calendario" style="" id="tablaMovimientos">
                    <caption align="top">Movimientos</caption>
                    <tr>
                        <td width="150px">
                            Tipo
                        </td>
                        <td width="150px">
                            Fecha
                        </td>
                        <td width="150px">
                            Monto
                        </td>
                        <td width="150px">
                            Moneda
                        </td>
                    </tr>
                </table>
            </form>


            <form action="" name="tarjetasCue" method="post" id="tarjetasCue" style="float: left;">
                <h2>Cuenta a Consultar</h2>
                <input type="number" placeholder="Cuenta" name="Cuenta" required>
                <input type="button" value="Mostrar" onclick="consultaTarCue();">
            </form>

            <form action="" name="tableTarjetasCue" method="post" id="tableTarjetasCue" style="display: none;float: left;">
                <table width="600px" border="1px" title="Tarjetas" style="" id="tablaTarjetasCue">
                    <caption align="top">Tarjetas Asociadas</caption>
                    <tr>
                        <td width="150px">
                            Número
                        </td>
                        <td width="150px">
                            Fecha
                        </td>
                        <td width="150px">
                            Saldo
                        </td>
                        <td width="150px">
                            Tipo
                        </td>
                    </tr>
                </table>
            </form>

            <form action="" name="transferenciasCue" method="post" id="transferenciasCue">
                <h2>Transferencia</h2>
                Tipo de moneda:<br>
                <input type="radio" name="moneda_transferencia"  id="ColonesTra" value="Colones" onclick="moneda('Colones');" checked>
                <label for="ColonesTra"> Colones<br></label>
                <input type="radio" name="moneda_transferencia"  id="DolaresTra" value="Dólares" onclick="moneda('Dolares');">
                <label for="DolaresTra"> Dólares<br></label>
                <input type="number" placeholder="Monto" name="Monto" required>
                <input type="number" placeholder="Cuenta Emisora" name="CuentaEmi" required>
                <input type="number" placeholder="Cuenta Receptora" name="CuentaRec" required>
                <input type="button" value="Transferir" onclick="postTra();">
            </form>
        </div>
        <!-- Cuentas -->

        <!-- Tarjetas -->
        <div class="contenedor" style="display: none" id="tarjetas">
            <form action="" name="pagoTar" method="post" id="pagoTar">
                <h2>Pago de Tarjeta</h2>
                <input type="number" placeholder="Número de Tarjeta" name="Numero" required>
                <input type="number" placeholder="Monto a Cancelar" name="Monto" required>
                <input type="button" value="Pagar" onclick="pagoTar();">
            </form>

            <form action="" name="listadoTar" method="post" id="listadoTar" style="float: left;">
                <h2>Tarjeta a Consultar</h2>
                <input type="number" placeholder="Número de Tarjeta" name="Numero" required>Fecha Inicial<br>
                <input type="date" placeholder="Fecha Inicial" name="fechaInicio" required>Fecha Final<br>
                <input type="date" placeholder="Fecha Final" name="fechaFinal" required>
                <input type="button" value="Consultar" onclick="listadoTar();">
            </form>

            <form action="" name="tableListado" method="post" id="tableListado" style="display: none;float: left;">
                <table width="600px" border="1px" title="Tarjetas" style="" id="tablaListado">
                    <caption align="top">Listado de Compras</caption>
                    <tr>
                        <td width="150px">
                            Comercio
                        </td>
                        <td width="150px">
                            Monto
                        </td>
                        <td width="150px">
                            Fecha de Expiración
                        </td>
                        <td width="150px">
                            Moneda
                        </td>
                    </tr>
                </table>
            </form>
        </div>
        <!-- Tarjetas -->

        <!-- Préstamos -->
        <div class="contenedor" style="display: none" id="prestamos">
            <form action="" name="tablePagoPre" method="post" id="tablePagoPre" style="display: none;float: left;">
                <table width="720px" border="1px" title="Calendario" style="" id="tablaPagoPre">
                    <caption align="top">Préstamos</caption>
                    <tr>
                        <td width="120px">
                            # de Préstamo
                        </td>
                        <td width="120px">
                            Monto
                        </td>
                        <td width="120px">
                            Intereses
                        </td>
                        <td width="120px">
                            Fecha
                        </td>
                        <td width="120px">
                            Pago Normal
                        </td>
                        <td width="120px">
                            Pago Extraordinario
                        </td>
                    </tr>
                </table>
            </form>
        </div>
        <!-- Préstamos -->

	</header>
	<div class="contenedor">
		<p>
			
		</p>
	</div>



	<script>
        /*
        Función para mostrar los elementos de cada pestaña
        Parámetro: nombre de la pestaña a mostrar  
        */
		function mostrar(p1){
			/*Se hacen invisibles todos los divs */
            /*document.getElementById('login');
            roles.style.display='none';*/
            document.getElementById('login');
            document.getElementById('cuentas');
            cuentas.style.display='none';
            document.getElementById('tarjetas');
            tarjetas.style.display='none';
            document.getElementById('prestamos');
            prestamos.style.display='none';
			/*document.getElementById('sucursales');
			sucursales.style.display='none';
			document.getElementById('empleados');
			empleados.style.display='none';
			document.getElementById('proveedores');
			proveedores.style.display='none';
			document.getElementById('productos');
			productos.style.display='none';
			document.getElementById('compras');
			compras.style.display='none';
			document.getElementById('horas');
			horas.style.display='none';
            document.getElementById('planilla');
            planilla.style.display='none';
            document.getElementById('reportes');
            reportes.style.display='none';
            document.getElementById('facturacion');
            facturacion.style.display='none';

			/*Se muestra solo el div que se necesita*/

			switch(p1){
                case 'login':
                    login.style.display='none';
                    document.getElementById('menunav').style.display='block';
                    break;

                case 'movimientosCue':
                    cuentas.style.display="block";
                    document.getElementById('movimientosCue');
                    movimientosCue.style.display='inline-table';
                    document.getElementById('tableMovimientos');
                    tableMovimientos.style.display='inline-table';
                    document.getElementById('tarjetasCue');
                    tarjetasCue.style.display='none';
                    document.getElementById('tableTarjetasCue');
                    tableTarjetasCue.style.display='none';
                    document.getElementById('transferenciasCue');
                    transferenciasCue.style.display='none';
                    break;
                case 'tarjetasCue':
                    cuentas.style.display="block";
                    document.getElementById('movimientosCue');
                    movimientosCue.style.display='none';
                    document.getElementById('tableMovimientos');
                    tableMovimientos.style.display='none';
                    document.getElementById('tarjetasCue');
                    tarjetasCue.style.display='inline-table';
                    document.getElementById('tableTarjetasCue');
                    tableTarjetasCue.style.display='inline-table';
                    document.getElementById('transferenciasCue');
                    transferenciasCue.style.display='none';
                    break;
                case 'transferenciasCue':
                    cuentas.style.display="block";
                    document.getElementById('movimientosCue');
                    movimientosCue.style.display='none';
                    document.getElementById('tableMovimientos');
                    tableMovimientos.style.display='none';
                    document.getElementById('tarjetasCue');
                    tarjetasCue.style.display='none';
                    document.getElementById('tableTarjetasCue');
                    tableTarjetasCue.style.display='none';
                    document.getElementById('transferenciasCue');
                    transferenciasCue.style.display='block';
                    break;

                 case 'pagoTar':
                    tarjetas.style.display="block";
                    document.getElementById('pagoTar');
                    pagoTar.style.display='block';
                    document.getElementById('listadoTar');
                    listadoTar.style.display='none';
                    document.getElementById('tableListado');
                    tableListado.style.display='none';
                    break;
                case 'comprasTar':
                    tarjetas.style.display="block";
                    document.getElementById('pagoTar');
                    pagoTar.style.display='none';
                    document.getElementById('listadoTar');
                    listadoTar.style.display='inline-table';
                    document.getElementById('tableListado');
                    tableListado.style.display='inline-table';
                    break;

                case 'pagosPre':
                    prestamos.style.display="block";
                    document.getElementById('tablePagoPre');
                    tablePagoPre.style.display='inline-table';
                    break;
				/*case 'sucursales':
					sucursales.style.display='block';
					break;
				case 'empleados':
					empleados.style.display='block';
					break;
				case 'proveedores':
					proveedores.style.display='block';
					break;
				case 'productos':
					productos.style.display='block';
					break;
				case 'compras':
					compras.style.display='block';
					break;
				case 'horas':
					horas.style.display='block';
					break;
                case 'planilla':
                    planilla.style.display='block';
                    break;
                case 'reportes':
                    reportes.style.display='block';
                    break;
                case 'facturacion':
                    facturacion.style.display='block';
                    break;
                case 'login':
                    var login = document.getElementById("login");
                    var xhr = new XMLHttpRequest();
                    var xhr2 = new XMLHttpRequest();
                    var user='';
                    var pass='';
                    var suc='';
                    xhr2.onreadystatechange = function() {
                        if (xhr2.readyState == XMLHttpRequest.DONE) {
                            var parser, xmlDoc;
                            var text = xhr2.responseText;
                            parser = new DOMParser();
                            xmlDoc = parser.parseFromString(text,"text/xml");
                            user=xmlDoc.getElementsByTagName("Cedula")[0].childNodes[0].nodeValue;
                            pass=xmlDoc.getElementsByTagName("Contrasena")[0].childNodes[0].nodeValue;
                            suc=xmlDoc.getElementsByTagName("Sucursal")[0].childNodes[0].nodeValue;

                        }
                        
                    }
                    xhr2.open('GET', 'http://'+login.IP.value+'/RESTWebService/empleado?cedula='+login.Usuario.value, true);
                    xhr2.send(null);
                    
                    if (login.rol.value=="Administrador") {
                        xhr.onreadystatechange = function() {
                            if (xhr.readyState == XMLHttpRequest.DONE) {
                                var parser, xmlDoc;
                                var text = xhr.responseText;
                                parser = new DOMParser();
                                xmlDoc = parser.parseFromString(text,"text/xml");

                                if (login.Usuario.value==xmlDoc.getElementsByTagName("Ced_administrador")[0].childNodes[0].nodeValue && login.Contraseña.value==pass) {
                                    login.style.display='none';
                                    document.getElementById('menunav').style.display='block';
                                }
                                else{
                                    alert("Usuario, Contraseña o Sucursal Incorrectos");
                                }
                            }
                        }
                        xhr.open('GET', 'http://'+login.IP.value+'/RESTWebService/sucursal?codigo='+login.Sucursal.value, true);
                        xhr.send(null);
                        
                    }
                    else{
                        xhr.onreadystatechange = function() {
                            if (xhr.readyState == XMLHttpRequest.DONE) {
                                var parser, xmlDoc;
                                var text = xhr.responseText;
                                parser = new DOMParser();
                                xmlDoc = parser.parseFromString(text,"text/xml");

                                if (login.Usuario.value==user && login.Contraseña.value==pass && login.Sucursal.value==suc) {
                                    document.getElementById("menunemp").style.display="block";
                                    login.style.display="none";
                                    mostrar("facturacion");

                                }
                                else{
                                    alert("Usuario, Contraseña o Sucursal Incorrectos");
                                }
                            }
                        }
                        xhr.open('GET', 'http://'+login.IP.value+'/RESTWebService/empleado?cedula='+login.Usuario.value+'&contrasena='+login.Contraseña.value+'&codigo_sucursal='+login.Sucursal.value, true);
                        xhr.send(null);

                    }
                    break;*/
				default:
					
			}
        }


        function limpiar(p1){
            var tabla = document.getElementById(p1);
            while(tabla.rows.length!=1){
                tabla.deleteRow(1);
            }
        }

        function ocultar(p1){
            if(p1=='crear'){
                document.getElementById('crearCli');
                crearCli.PNombre.placeholder='Nombre';
                crearCli.SNombre.style.display='none';
                crearCli.PApellido.style.display='none';
                crearCli.SApellido.style.display='none';
            }
            else{
                document.getElementById('modificarCli');
                modificarCli.PNombre.placeholder='Nombre';
                modificarCli.SNombre.style.display='none';
                modificarCli.PApellido.style.display='none';
                modificarCli.SApellido.style.display='none';
            }
        }

        function desocultar(p1){
            if (p1=='crear') {
                document.getElementById('crearCli');
                crearCli.PNombre.placeholder='Primer Nombre';
                crearCli.SNombre.style.display='block';
                crearCli.PApellido.style.display='block';
                crearCli.SApellido.style.display='block';
            }
            else{
                document.getElementById('modificarCli');
                modificarCli.PNombre.placeholder='Primer Nombre';
                modificarCli.SNombre.style.display='block';
                modificarCli.PApellido.style.display='block';
                modificarCli.SApellido.style.display='block';
                
            }
        }

        function moneda(p1){
            switch(p1){
                case 'Dolares':
                    document.getElementById('crearCli');
                    crearCli.ingreso.placeholder='$ Ingreso Mensual';
                    break;
                case 'Euros':
                    document.getElementById('crearCli');
                    crearCli.ingreso.placeholder='€ Ingreso Mensual';
                    break;
                case 'Colones':
                    document.getElementById('crearCli');
                    crearCli.ingreso.placeholder='₡ Ingreso Mensual';
                    break;
                default:
            }
        }

        function monedamod(p1){
            switch(p1){
                case 'Dolares':
                    document.getElementById('modificarCli');
                    modificarCli.ingreso.placeholder='$ Ingreso Mensual';
                    break;
                case 'Euros':
                    document.getElementById('modificarCli');
                    modificarCli.ingreso.placeholder='€ Ingreso Mensual';
                    break;
                case 'Colones':
                    document.getElementById('modificarCli');
                    modificarCli.ingreso.placeholder='₡ Ingreso Mensual';
                    break;
                default:
            }
        }

        function contraseña(){
            var aleatorio = Math.round(Math.random()*9999);
            return ''+aleatorio;
        }
    </script>
</body>
</html>